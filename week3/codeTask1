arduino:

int potPin = A0;
int ledPin = 8;
int potValue = 0;
String command = "";

void setup() {
  Serial.begin(9600);
  pinMode(ledPin, OUTPUT);
}

void loop() {
  // Read potentiometer and send value to Python
  potValue = analogRead(potPin);
  Serial.println(potValue);
  
  // Check if Python sent a command
  if (Serial.available() > 0) {
    command = Serial.readStringUntil('\n');
    command.trim();

    if (command == "ON") {
      digitalWrite(ledPin, HIGH);
    } else if (command == "OFF") {
      digitalWrite(ledPin, LOW);
    }
  }

  // No delay here â€” Arduino updates as fast as it can
}


python:

import serial
import time

ser = serial.Serial('COM7', 9600, timeout=0.1)  # short timeout
time.sleep(2)  # wait for Arduino to initialize

try:
    while True:
        line = ser.readline().decode().strip()
        if line.isdigit():
            pot_value = int(line)
            print("Potentiometer Value:", pot_value)

            # Immediately send LED command
            if pot_value > 512:
                ser.write(b"ON\n")
            else:
                ser.write(b"OFF\n")

except KeyboardInterrupt:
    print("\nProgram interrupted by user.")

finally:
    ser.close()
    print("Serial connection closed.")
